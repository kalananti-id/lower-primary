<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>LP ScratchJr ‚Äì Proyek Mid-Semester Tahap 4</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      /* SAME THEME AS TAHAP 1‚Äì3 */
      --bg: #ecfeff;
      --bg-soft:#f0fdfa;
      --accent:#14b8a6;
      --accent-soft: rgba(20,184,166,.12);
      --accent-strong:#6366f1;
      --text-main:#0f172a;
      --text-soft:#475569;
      --card:#ffffff;
      --danger:#ef4444;
      --success:#16a34a;
      --radius-xl:24px;
      --shadow-soft: 0 18px 45px rgba(20,184,166,.22);
      --transition-fast:.2s ease-out;
      --transition-med:.35s ease-out;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background: radial-gradient(circle at top, #cffafe 0, #ecfeff 45%, #f0fdfa 100%);
      color: var(--text-main);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:16px;
    }

    .deck{
      position:relative;
      width:100%;
      max-width:1120px;
      background: linear-gradient(135deg,#f8fafc,#ecfeff 40%,#f0fdfa 100%);
      border-radius:32px;
      padding:20px 20px 18px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(20,184,166,.35);
      overflow:hidden;
    }

    .blob{position:absolute;border-radius:999px;filter:blur(28px);opacity:.45;pointer-events:none;z-index:0}
    .blob.a{width:260px;height:260px;background:#67e8f9;top:-80px;right:-60px;animation:float1 14s infinite alternate ease-in-out}
    .blob.b{width:220px;height:220px;background:#a7f3d0;bottom:-70px;left:-40px;animation:float2 18s infinite alternate ease-in-out}
    .blob.c{width:180px;height:180px;background:rgba(99,102,241,.35);top:40px;left:-60px;animation:float3 16s infinite alternate ease-in-out}
    @keyframes float1{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(-40px,35px,0)}}
    @keyframes float2{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(50px,-25px,0)}}
    @keyframes float3{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(35px,20px,0)}}

    header.deck-header{
      position:relative;z-index:1;
      display:flex;align-items:center;justify-content:space-between;
      margin-bottom:16px;padding:4px 4px 10px;gap:12px;
      border-bottom:1px solid rgba(20,184,166,.35);
    }
    .title-block{display:flex;flex-direction:column;gap:4px}
    .title-pill{
      display:inline-flex;align-items:center;gap:8px;
      background: rgba(255,255,255,.9);
      border-radius:999px;padding:4px 10px;
      font-size:11px;text-transform:uppercase;letter-spacing:.08em;
      color: var(--text-soft);
      border: 1px solid rgba(20,184,166,.35);
    }
    .pill-dot{width:7px;height:7px;border-radius:999px;background:#22c55e;box-shadow:0 0 16px rgba(34,197,94,.55)}
    .main-title{
      font-size:20px;font-weight:900;
      display:flex;align-items:center;gap:8px;
      color:#0f172a;
    }
    .badge{
      font-size:11px;text-transform:uppercase;
      padding:3px 8px;border-radius:999px;
      border:1px solid rgba(99,102,241,.45);
      color:#3730a3;background:rgba(99,102,241,.12);
      font-weight:800;
    }
    .subtitle{font-size:13px;color:var(--text-soft)}
    .meta{display:flex;flex-direction:column;align-items:flex-end;gap:4px;font-size:11px;color:var(--text-soft)}
    .meta-row{display:flex;align-items:center;gap:8px}
    .pill{
      border-radius:999px;padding:4px 8px;
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(20,184,166,.35);
    }
    .progress-bar{position:relative;height:4px;border-radius:999px;background: rgba(20,184,166,.16);overflow:hidden;width:180px}
    .progress-fill{position:absolute;inset:0;width:0%;background: linear-gradient(90deg,#14b8a6,#6366f1);transition:width var(--transition-med)}

    .content{position:relative;z-index:1;margin-top:14px;display:flex;gap:14px}
    .sidebar{
      width:240px;
      background: radial-gradient(circle at top left, rgba(255,255,255,.9), rgba(236,254,255,.9));
      border-radius: var(--radius-xl);
      padding:14px 12px;border:1px solid rgba(20,184,166,.35);
      display:flex;flex-direction:column;gap:10px;
    }
    .sidebar-section-title{font-size:12px;text-transform:uppercase;letter-spacing:.12em;color:var(--text-soft)}
    .slide-indicator{font-size:26px;font-weight:900;color:var(--accent);display:flex;align-items:baseline;gap:3px}
    .slide-indicator small{font-size:11px;text-transform:uppercase;color:var(--text-soft)}
    .sidebar-main{font-size:14px;font-weight:900;color:#0f172a}
    .sidebar-text{font-size:12px;color:var(--text-soft);line-height:1.5}
    .sidebar-tags{display:flex;flex-wrap:wrap;gap:4px}
    .sidebar-tag{
      font-size:10px;padding:3px 7px;border-radius:999px;
      border:1px solid rgba(20,184,166,.35);
      color:var(--text-soft);background: rgba(255,255,255,.8);
    }
    .sidebar-hint{
      margin-top:auto;font-size:11px;color:var(--text-soft);
      border-top:1px dashed rgba(20,184,166,.35);
      padding-top:6px;
    }
    .sidebar-hint span{color:var(--accent-strong);font-weight:800}

    .slides-wrapper{
      flex:1;
      background: radial-gradient(circle at top, rgba(255,255,255,.55), rgba(236,254,255,.75) 55%, rgba(240,253,250,.85));
      border-radius: var(--radius-xl);
      border:1px solid rgba(20,184,166,.28);
      padding:16px 18px 14px;
      position:relative;
      overflow:hidden;
      min-height: 520px;
    }

    /* Desktop deck style: one slide at a time */
    .slide{
      display:none;opacity:0;
      transform: translateX(10px) translateY(4px);
      transition: opacity var(--transition-med), transform var(--transition-med);
      position:absolute;inset:16px 18px 72px 18px;
      overflow-y:auto;padding-right:6px;
    }
    .slide.active{display:block;opacity:1;transform: translateX(0) translateY(0)}

    .slide h2{font-size:20px;margin-bottom:8px;display:flex;align-items:center;gap:8px;color:#0f172a}
    .slide h2 .emoji{font-size:22px}
    .subtitle-slide{font-size:13px;color:var(--text-soft);margin-bottom:14px;line-height:1.6}

    .pill-row{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}
    .chip{
      font-size:11px;padding:4px 9px;border-radius:999px;
      background: rgba(255,255,255,.86);
      border:1px solid rgba(20,184,166,.35);
      display:inline-flex;align-items:center;gap:5px;color:var(--text-soft)
    }
    .chip .dot{width:6px;height:6px;border-radius:999px;background:var(--accent)}

    .card{
      border-radius:16px;border:1px solid rgba(20,184,166,.35);
      padding:10px 12px;background: var(--card);
      box-shadow:0 8px 18px rgba(20,184,166,.12);
      margin-top:10px;
    }

    .list{margin-top:6px;padding-left:18px;font-size:13px;color:var(--text-soft)}
    .list li{margin-bottom:4px}

    .field label{
      display:block;font-size:12px;color:var(--text-soft);
      margin-bottom:4px;font-weight:900;
    }
    .field input[type="text"], .field textarea, .field select{
      width:100%;
      border:1px solid rgba(20,184,166,.35);
      border-radius:12px;padding:10px 10px;
      font-size:13px;outline:none;
      background: rgba(255,255,255,.9);
      color:var(--text-main);
      transition:border-color var(--transition-fast), box-shadow var(--transition-fast);
    }
    .field textarea{min-height:88px;resize:vertical}
    .field input[type="text"]:focus, .field textarea:focus, .field select:focus{
      border-color: rgba(99,102,241,.55);
      box-shadow:0 0 0 4px rgba(99,102,241,.10);
    }

    .btn-row{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .btn{
      border-radius:999px;border:1px solid rgba(20,184,166,.45);
      background: rgba(255,255,255,.92);
      padding:6px 12px;
      display:inline-flex;align-items:center;gap:6px;
      font-size:12px;color:var(--text-main);
      cursor:pointer;font-weight:900;
      transition: background var(--transition-fast), transform .1s ease-out, box-shadow .1s ease-out, border-color .1s ease-out;
    }
    .btn .icon{font-size:14px}
    .btn.primary{
      border-color: rgba(99,102,241,.6);
      background: linear-gradient(135deg, rgba(99,102,241,.25), rgba(20,184,166,.25));
      color:#0f172a;
      box-shadow:0 12px 22px rgba(99,102,241,.12);
    }
    .btn:hover{transform: translateY(-1px);box-shadow:0 12px 24px rgba(20,184,166,.18)}

    .toast{
      display:none;margin-top:10px;font-size:12px;
      color:#0f766e;border:1px solid rgba(20,184,166,.35);
      background: rgba(20,184,166,.10);
      padding:8px 10px;border-radius:12px;font-weight:900;
    }
    .toast.show{display:block}

    .checklist{list-style:none;margin-top:6px}
    .checklist li{
      display:flex;align-items:center;gap:8px;
      margin-bottom:8px;font-size:13px;color:var(--text-soft);
    }
    .checklist input[type="checkbox"]{width:16px;height:16px;accent-color:var(--accent)}

    .footer-nav{
      position:absolute;inset-inline:18px;bottom:14px;
      display:flex;align-items:center;justify-content:space-between;
      z-index:2;gap:10px;
    }
    .slide-dots{display:flex;align-items:center;gap:5px}
    .slide-dot{
      width:7px;height:7px;border-radius:999px;
      border:1px solid rgba(20,184,166,.45);
      cursor:pointer;opacity:.6;
      transition: background var(--transition-fast), opacity var(--transition-fast), transform .1s ease-out, border-color var(--transition-fast);
      background: rgba(255,255,255,.85);
    }
    .slide-dot.active{
      background: var(--accent-strong);
      border-color: var(--accent-strong);
      opacity:1;transform: scale(1.2);
    }
    .slide-counter-text{font-size:11px;color: var(--text-soft)}

    /* === Mobile: switch to ‚Äúworksheet scroll style‚Äù to avoid squished layout === */
    @media (max-width: 900px){
      .content{flex-direction:column}
      .sidebar{width:100%;flex-direction:row;flex-wrap:wrap;gap:6px 12px;align-items:center}
      .sidebar-hint{margin-top:0;border-top:none}
      .slides-wrapper{
        min-height: 60vh;
        overflow:auto;
        padding-bottom: 92px;
      }
      .slide{
        position:relative;
        inset:auto;
        overflow:visible;
        padding-right:0;
        transform:none;
        display:none;
      }
      .slide.active{display:block;opacity:1}
      .footer-nav{
        position: sticky;
        bottom: 10px;
        inset-inline: 10px;
        background: rgba(255,255,255,.85);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(20,184,166,.25);
        border-radius: 16px;
        padding: 10px;
      }
    }

    /* Access gate */
    .gate{position:fixed;inset:0;background:rgba(15,23,42,.55);display:none;align-items:center;justify-content:center;padding:16px;z-index:9999}
    .gate.show{display:flex}
    .gate-card{width:min(560px,100%);background:rgba(255,255,255,.95);border:1px solid rgba(20,184,166,.45);border-radius:22px;box-shadow:0 22px 70px rgba(15,23,42,.25);padding:16px 16px 14px}
    .gate-title{font-size:18px;font-weight:900;margin-bottom:6px;color:#0f172a;display:flex;align-items:center;gap:8px}
    .gate-sub{font-size:13px;color:var(--text-soft);line-height:1.55;margin-bottom:10px}
    .gate-row{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center}
    .gate-input{width:100%;border:1px solid rgba(20,184,166,.45);border-radius:14px;padding:12px 12px;font-size:14px;outline:none;background:rgba(255,255,255,.95);color:var(--text-main);text-transform:uppercase;letter-spacing:.06em;font-weight:900}
    .gate-input:focus{border-color:rgba(99,102,241,.55);box-shadow:0 0 0 4px rgba(99,102,241,.12)}
    .gate-note{margin-top:10px;font-size:12px;padding:8px 10px;border-radius:14px;border:1px solid rgba(20,184,166,.35);background:rgba(20,184,166,.10);color:#0f766e;font-weight:900}
    .gate-note.error{border-color:rgba(239,68,68,.55);background:rgba(254,202,202,.75);color:#b91c1c}
  </style>
</head>

<body>
  <div class="deck" data-total-slides="11">
    <div class="blob a"></div>
    <div class="blob b"></div>
    <div class="blob c"></div>

    <header class="deck-header">
      <div class="title-block">
        <div class="title-pill"><span class="pill-dot"></span> Lower Primary (2‚Äì3 SD) ‚Ä¢ ScratchJr</div>
        <div class="main-title">
          Tahap 4: Rapihin ‚Ä¢ Presentasi ‚Ä¢ Refleksi
          <span class="badge">Finish!</span>
        </div>
        <p class="subtitle">Hari ini kita rapihin animasi, lalu ceritakan ke teman-teman.</p>
      </div>

      <div class="meta">
        <div class="meta-row"><span>Durasi</span><span class="pill">¬± 60 menit</span></div>
        <div class="meta-row"><span>Mode</span><span class="pill">Interactive Slides</span></div>
        <div class="meta-row"><div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div></div>
      </div>
    </header>

    <div class="content">
      <aside class="sidebar">
        <div>
          <div class="sidebar-section-title">Slide</div>
          <div class="slide-indicator"><span id="sidebarSlideNumber">1</span><small>/ 11</small></div>
        </div>
        <div class="sidebar-main" id="sidebarMain">Mulai Tahap 4</div>
        <p class="sidebar-text" id="sidebarText">Sedikit rapihin, lalu tampil!</p>

        <div class="sidebar-tags">
          <span class="sidebar-tag">Rapihin</span>
          <span class="sidebar-tag">Presentasi</span>
          <span class="sidebar-tag">Pendengar</span>
        </div>

        <p class="sidebar-hint">Pakai <span>‚Üê</span> / <span>‚Üí</span> atau tombol <span>Next</span>.</p>
      </aside>

      <main class="slides-wrapper">

        <!-- Slide 1 -->
        <article class="slide active" data-side-main="Mulai Tahap 4" data-side-text="Hari ini kita beresin proyek!">
          <h2><span class="emoji">üéâ</span> Hari Ini: Finishing!</h2>
          <p class="subtitle-slide">
            Kamu sudah bikin animasi kamu bergerak. Sekarang kita bikin animasimu <b>lebih rapi</b>,
            lalu kamu <b>ceritakan</b> proyekmu di depan kelas.
          </p>

          <div class="pill-row">
            <span class="chip"><span class="dot"></span> Cek dari awal</span>
            <span class="chip"><span class="dot"></span> Rapihin gerak & kata</span>
            <span class="chip"><span class="dot"></span> Pesan uangnya jelas</span>
            <span class="chip"><span class="dot"></span> Presentasi mini</span>
          </div>

          <div class="card">
            <h3 style="font-size:15px;">Ingat ya</h3>
            <ul class="list">
              <li>Tidak perlu sempurna. Yang penting <b>ceritanya jalan</b>.</li>
              <li>Kalau ada yang nyangkut, minta bantuan guru.</li>
              <li>Semua karya teman harus kita hargai üôÇ</li>
            </ul>
          </div>
        </article>

        <!-- Slide 2 -->
        <article class="slide" data-side-main="Final Check" data-side-text="Coba animasi dari awal sampai akhir.">
          <h2><span class="emoji">‚úÖ</span> Coba dari Awal sampai Akhir</h2>
          <p class="subtitle-slide">Putar animasimu. Kalau ada yang aneh, kita rapihin.</p>

          <div class="card">
            <ul class="checklist">
              <li><input type="checkbox" id="t1"> Animasi bisa mulai</li>
              <li><input type="checkbox" id="t2"> Cerita jalan sampai akhir</li>
              <li><input type="checkbox" id="t3"> Kata-katanya kebaca</li>
              <li><input type="checkbox" id="t4"> Ganti latar sesuai cerita</li>
            </ul>

            <div class="btn-row">
              <button class="btn primary" type="button" id="saveTestBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearTestBtn"><span class="icon">üßΩ</span> Reset</button>
            </div>
            <div class="toast" id="testToast">Tersimpan ‚úÖ</div>
          </div>
        </article>

        <!-- Slide 3 -->
        <article class="slide" data-side-main="Rapihin" data-side-text="Tulis perbaikan terakhir kamu.">
          <h2><span class="emoji">üõ†Ô∏è</span> Rapihin Terakhir</h2>
          <p class="subtitle-slide">
            Tulis perbaikan terakhir yang kamu lakukan (boleh singkat).
            Contoh: ‚Äúbikin kata lebih pelan‚Äù, ‚Äúgerakannya dirapihin‚Äù.
          </p>

          <div class="card">
            <div class="field">
              <label>Aku tadi merapihin‚Ä¶</label>
              <textarea id="finalFix" placeholder="Contoh: kata-kata tidak terlalu cepat"></textarea>
            </div>

            <div class="btn-row">
              <button class="btn primary" type="button" id="saveFixBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearFixBtn"><span class="icon">üßΩ</span> Hapus</button>
            </div>
            <div class="toast" id="fixToast">Tersimpan ‚úÖ</div>
          </div>
        </article>

        <!-- Slide 4 -->
        <article class="slide" data-side-main="Judul & Tema" data-side-text="Isi judul dan tema ceritamu.">
          <h2><span class="emoji">üè∑Ô∏è</span> Judul & Tema Proyek</h2>
          <p class="subtitle-slide">Isi dengan kata yang pendek ya.</p>

          <div class="card">
            <div class="field">
              <label>Judul proyekku</label>
              <input type="text" id="title" placeholder='Contoh: "Uang Jajan Pintar"' />
            </div>

            <div class="field" style="margin-top:10px;">
              <label>Tema ceritaku (pilih satu)</label>
              <select id="theme">
                <option value="">Pilih‚Ä¶</option>
                <option value="Menabung">Menabung</option>
                <option value="Tidak boros">Tidak boros</option>
                <option value="Kebutuhan dulu">Kebutuhan dulu</option>
                <option value="Atur uang jajan">Atur uang jajan</option>
              </select>
            </div>

            <div class="btn-row">
              <button class="btn primary" type="button" id="saveTitleBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearTitleBtn"><span class="icon">üßΩ</span> Hapus</button>
            </div>
            <div class="toast" id="titleToast">Tersimpan ‚úÖ</div>
          </div>
        </article>

        <!-- Slide 5 -->
        <article class="slide" data-side-main="Link Proyek" data-side-text="Tulis link/ lokasi file proyek.">
          <h2><span class="emoji">üîó</span> Link / Lokasi Proyek</h2>
          <p class="subtitle-slide">
            Kalau proyekmu disimpan di Drive / folder kelas, tulis linknya di sini.
            Kalau belum ada, boleh tulis ‚ÄúNanti‚Äù.
          </p>

          <div class="card">
            <div class="field">
              <label>Link proyek ScratchJr</label>
              <input type="text" id="link" placeholder="Tempel link di sini / tulis: Nanti" />
            </div>

            <div class="btn-row">
              <button class="btn primary" type="button" id="saveLinkBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearLinkBtn"><span class="icon">üßΩ</span> Hapus</button>
            </div>
            <div class="toast" id="linkToast">Tersimpan ‚úÖ</div>
          </div>
        </article>

        <!-- Slide 6 -->
        <article class="slide" data-side-main="Alur Cerita" data-side-text="Tulis alur 1‚Äì4 langkah.">
          <h2><span class="emoji">üìñ</span> Alur Cerita (Singkat)</h2>
          <p class="subtitle-slide">
            Tulis langkah ceritamu. Boleh 3 atau 4 baris saja.
          </p>

          <div class="card">
            <div class="field">
              <label>1) Awal</label>
              <input type="text" id="story1" placeholder="Contoh: Aku dapat uang jajan" />
            </div>
            <div class="field" style="margin-top:8px;">
              <label>2) Masalah</label>
              <input type="text" id="story2" placeholder="Contoh: Aku ingin beli mainan" />
            </div>
            <div class="field" style="margin-top:8px;">
              <label>3) Pilihan / Tindakan</label>
              <input type="text" id="story3" placeholder="Contoh: Aku beli kebutuhan dulu" />
            </div>
            <div class="field" style="margin-top:8px;">
              <label>4) Akhir (opsional)</label>
              <input type="text" id="story4" placeholder="Contoh: Sisa uang ditabung" />
            </div>

            <div class="btn-row">
              <button class="btn primary" type="button" id="saveStoryBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearStoryBtn"><span class="icon">üßΩ</span> Hapus</button>
            </div>
            <div class="toast" id="storyToast">Tersimpan ‚úÖ</div>
          </div>
        </article>

        <!-- Slide 7 -->
        <article class="slide" data-side-main="Yang Dipelajari" data-side-text="Tulis hal baru yang kamu bisa.">
          <h2><span class="emoji">üåü</span> Hal yang Aku Pelajari</h2>
          <p class="subtitle-slide">
            Tulis 1‚Äì2 kalimat saja. Boleh singkat.
          </p>

          <div class="card">
            <div class="field">
              <label>Aku belajar‚Ä¶</label>
              <textarea id="learned" placeholder="Contoh: Aku belajar ganti latar dan bikin karakter bicara"></textarea>
            </div>

            <div class="btn-row">
              <button class="btn primary" type="button" id="saveLearnedBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearLearnedBtn"><span class="icon">üßΩ</span> Hapus</button>
            </div>
            <div class="toast" id="learnedToast">Tersimpan ‚úÖ</div>
          </div>
        </article>

        <!-- Slide 8 -->
        <article class="slide" data-side-main="Checklist" data-side-text="Centang kalau sudah siap presentasi.">
          <h2><span class="emoji">üìã</span> Checklist Tahap 4</h2>
          <p class="subtitle-slide">Centang kalau sudah beres ya.</p>

          <div class="card">
            <ul class="checklist">
              <li><input type="checkbox" id="c1"> Animasi sudah dites dan jalan</li>
              <li><input type="checkbox" id="c2"> Kata-kata pas (tidak terlalu cepat/lambat)</li>
              <li><input type="checkbox" id="c3"> Gerak karakter rapi</li>
              <li><input type="checkbox" id="c4"> Ganti latar halus</li>
              <li><input type="checkbox" id="c5"> Pesan uangnya jelas</li>
              <li><input type="checkbox" id="c6"> Aku siap presentasi</li>
              <li><input type="checkbox" id="c7"> Link proyek sudah ada / dicatat</li>
            </ul>

            <div class="btn-row">
              <button class="btn primary" type="button" id="saveCheckBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearCheckBtn"><span class="icon">üßΩ</span> Reset</button>
            </div>
            <div class="toast" id="checkToast">Tersimpan ‚úÖ</div>
          </div>
        </article>

        <!-- Slide 9: Presentation -->
        <article class="slide" data-side-main="Presentasi" data-side-text="Apa yang dilakukan saat tampil?">
          <h2><span class="emoji">üé§</span> Cara Presentasi (1 Menit)</h2>
          <p class="subtitle-slide">
            Kalau kamu maju, lakukan 4 langkah ini.
          </p>

          <div class="card">
            <ul class="list">
              <li>1) Bilang: <b>Judul</b> animasiku‚Ä¶</li>
              <li>2) Bilang: Ceritaku tentang‚Ä¶ <b>(tema uang)</b></li>
              <li>3) Jalankan animasi dari awal</li>
              <li>4) Bilang: Pesan dari ceritaku adalah‚Ä¶</li>
            </ul>
          </div>

          <div class="card">
            <div class="field">
              <label>Latihan kalimatku (boleh singkat)</label>
              <textarea id="practice" placeholder="Contoh: Judulku 'Uang Jajan Pintar'. Ceritaku tentang menabung. Pesannya: jangan boros."></textarea>
            </div>

            <div class="btn-row">
              <button class="btn primary" type="button" id="savePracticeBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearPracticeBtn"><span class="icon">üßΩ</span> Hapus</button>
            </div>
            <div class="toast" id="practiceToast">Tersimpan ‚úÖ</div>
          </div>

          <div class="card">
            <h3 style="font-size:15px;">Tips kecil</h3>
            <ul class="list">
              <li>Ngomong pelan ya.</li>
              <li>Kalau lupa, lihat catatanmu sebentar‚Äîboleh kok.</li>
              <li>Setelah selesai, bilang: <b>Terima kasih</b>.</li>
            </ul>
          </div>
        </article>

        <!-- Slide 10: Listener etiquette -->
        <article class="slide" data-side-main="Pendengar Baik" data-side-text="Apa yang dilakukan saat teman tampil?">
          <h2><span class="emoji">üëÇ</span> Saat Teman Presentasi‚Ä¶</h2>
          <p class="subtitle-slide">
            Kita jadi pendengar yang baik ya. Ini yang kita lakukan:
          </p>

          <div class="card">
            <ul class="checklist">
              <li><input type="checkbox" id="l1"> Duduk rapi dan lihat ke depan</li>
              <li><input type="checkbox" id="l2"> Tidak bicara saat teman tampil</li>
              <li><input type="checkbox" id="l3"> Dengarkan ceritanya sampai selesai</li>
              <li><input type="checkbox" id="l4"> Tepuk tangan setelah selesai</li>
              <li><input type="checkbox" id="l5"> Bilang 1 pujian yang baik</li>
            </ul>

            <div class="btn-row">
              <button class="btn primary" type="button" id="saveListenBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearListenBtn"><span class="icon">üßΩ</span> Reset</button>
            </div>
            <div class="toast" id="listenToast">Tersimpan ‚úÖ</div>
          </div>

          <div class="card">
            <div class="field">
              <label>Contoh pujian (pilih satu)</label>
              <select id="praise">
                <option value="">Pilih‚Ä¶</option>
                <option value="Aku suka ceritamu!">Aku suka ceritamu!</option>
                <option value="Gambarnya bagus!">Gambarnya bagus!</option>
                <option value="Pesannya jelas!">Pesannya jelas!</option>
                <option value="Gerakannya lucu!">Gerakannya lucu!</option>
              </select>
            </div>

            <div class="btn-row">
              <button class="btn primary" type="button" id="savePraiseBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearPraiseBtn"><span class="icon">üßΩ</span> Hapus</button>
            </div>
            <div class="toast" id="praiseToast">Tersimpan ‚úÖ</div>
          </div>
        </article>

        <!-- Slide 11 -->
        <article class="slide" data-side-main="Selesai!" data-side-text="Kamu sudah beres proyek mid-semester!">
          <h2><span class="emoji">üèÅ</span> Kamu Hebat!</h2>
          <p class="subtitle-slide">
            Kamu sudah menyelesaikan proyek animasi ScratchJr.
            Terima kasih sudah berusaha dan berani tampil.
          </p>

          <div class="card">
            <h3 style="font-size:15px;">Sebelum pulang</h3>
            <ul class="list">
              <li>Pastikan proyekmu tersimpan.</li>
              <li>Pastikan link / lokasi file sudah dicatat.</li>
              <li>Kasih high five ke dirimu sendiri üòÑ</li>
            </ul>
          </div>

          <div class="card">
            <div class="field">
              <label>Hal yang paling aku banggakan hari ini</label>
              <input type="text" id="proud" placeholder="Contoh: aku berani presentasi" />
            </div>

            <div class="btn-row">
              <button class="btn primary" type="button" id="saveProudBtn"><span class="icon">üíæ</span> Simpan</button>
              <button class="btn" type="button" id="clearProudBtn"><span class="icon">üßΩ</span> Hapus</button>
            </div>
            <div class="toast" id="proudToast">Tersimpan ‚úÖ</div>
          </div>
        </article>

        <!-- Footer -->
        <div class="footer-nav">
          <div class="slide-dots" id="slideDots"></div>
          <div class="slide-counter-text" id="slideCounterText">Slide 1 dari 11</div>
          <div class="nav-buttons">
            <button class="btn" type="button" data-nav="prev"><span class="icon">‚Üê</span> Prev</button>
            <button class="btn primary" type="button" data-nav="next">Next <span class="icon">‚Üí</span></button>
          </div>
        </div>

      </main>
    </div>
  </div>

  <!-- Access Code Gate (single, non-duplicate) -->
  <div class="gate" id="accessGate" aria-hidden="true">
    <div class="gate-card">
      <div class="gate-title">üîí Kode Akses</div>
      <div class="gate-sub">
        Masukkan kode akses untuk membuka materi.
        
      </div>
      <div class="gate-row">
        <input id="accessCodeInput" class="gate-input" type="text" placeholder="MASUKKAN KODE..." autocomplete="off" />
        <button class="btn primary" type="button" id="accessCodeBtn"><span class="icon">‚úÖ</span> Masuk</button>
      </div>
      <div class="gate-note" id="accessNote">Kode ini dari guru kamu.</div>
    </div>
  </div>

  <script>
    (function(){
      const slides = Array.from(document.querySelectorAll(".slide"));
      const totalSlides = slides.length;
      let currentSlide = 0;

      const sidebarNumber = document.getElementById("sidebarSlideNumber");
      const sidebarMain = document.getElementById("sidebarMain");
      const sidebarText = document.getElementById("sidebarText");
      const progressFill = document.getElementById("progressFill");
      const slideDotsContainer = document.getElementById("slideDots");
      const slideCounterText = document.getElementById("slideCounterText");
      const prevBtn = document.querySelector('button[data-nav="prev"]');
      const nextBtn = document.querySelector('button[data-nav="next"]');

      const dots = slides.map((_, idx) => {
        const dot = document.createElement("div");
        dot.className = "slide-dot" + (idx === 0 ? " active" : "");
        dot.dataset.index = String(idx);
        slideDotsContainer.appendChild(dot);
        return dot;
      });

      function updateSidebar(idx){
        const s = slides[idx];
        sidebarNumber.textContent = String(idx + 1);
        sidebarMain.textContent = s.getAttribute("data-side-main") || "";
        sidebarText.textContent = s.getAttribute("data-side-text") || "";
        slideCounterText.textContent = `Slide ${idx + 1} dari ${totalSlides}`;
      }
      function updateProgress(idx){
        const progress = ((idx + 1) / totalSlides) * 100;
        progressFill.style.width = progress + "%";
      }
      function updateDots(idx){
        dots.forEach((d,i)=>d.classList.toggle("active", i === idx));
      }
      function showSlide(idx){
        if(idx < 0 || idx >= totalSlides) return;
        slides[currentSlide].classList.remove("active");
        slides[idx].classList.add("active");
        currentSlide = idx;
        updateSidebar(idx);
        updateProgress(idx);
        updateDots(idx);
      }

      updateSidebar(0);
      updateProgress(0);

      prevBtn.addEventListener("click", ()=>showSlide(currentSlide - 1));
      nextBtn.addEventListener("click", ()=>showSlide(currentSlide + 1));
      window.addEventListener("keydown", (e)=>{
        if(e.key === "ArrowLeft") showSlide(currentSlide - 1);
        if(e.key === "ArrowRight") showSlide(currentSlide + 1);
      });
      dots.forEach(dot => dot.addEventListener("click", ()=>showSlide(Number(dot.dataset.index || "0"))));

      // ===== Storage Keys (Tahap 4) =====
      const KEY = {
        test: "lp_scratchjr_t4_test",
        finalFix: "lp_scratchjr_t4_final_fix",
        title: "lp_scratchjr_t4_title",
        theme: "lp_scratchjr_t4_theme",
        link: "lp_scratchjr_t4_link",
        story1: "lp_scratchjr_t4_story1",
        story2: "lp_scratchjr_t4_story2",
        story3: "lp_scratchjr_t4_story3",
        story4: "lp_scratchjr_t4_story4",
        learned: "lp_scratchjr_t4_learned",
        checklist: "lp_scratchjr_t4_checklist",
        practice: "lp_scratchjr_t4_practice",
        listen: "lp_scratchjr_t4_listen",
        praise: "lp_scratchjr_t4_praise",
        proud: "lp_scratchjr_t4_proud"
      };

      function showToast(id){
        const el = document.getElementById(id);
        if(!el) return;
        el.classList.add("show");
        setTimeout(()=>el.classList.remove("show"), 1200);
      }

      // Helpers: save/clear
      function saveJSON(key, obj){ localStorage.setItem(key, JSON.stringify(obj)); }
      function loadJSON(key){
        try{ return JSON.parse(localStorage.getItem(key) || "null"); }catch(_){ return null; }
      }

      // Slide 2 test checkboxes
      const tIds = ["t1","t2","t3","t4"];
      const tEls = tIds.map(id=>document.getElementById(id));
      document.getElementById("saveTestBtn").addEventListener("click", ()=>{
        saveJSON(KEY.test, tEls.map(x=>!!x.checked));
        showToast("testToast");
      });
      document.getElementById("clearTestBtn").addEventListener("click", ()=>{
        tEls.forEach(x=>x.checked=false);
        localStorage.removeItem(KEY.test);
      });

      // Slide 3 final fix
      const finalFix = document.getElementById("finalFix");
      document.getElementById("saveFixBtn").addEventListener("click", ()=>{
        localStorage.setItem(KEY.finalFix, finalFix.value || "");
        showToast("fixToast");
      });
      document.getElementById("clearFixBtn").addEventListener("click", ()=>{
        finalFix.value=""; localStorage.removeItem(KEY.finalFix);
      });

      // Slide 4 title/theme
      const title = document.getElementById("title");
      const theme = document.getElementById("theme");
      document.getElementById("saveTitleBtn").addEventListener("click", ()=>{
        localStorage.setItem(KEY.title, title.value || "");
        localStorage.setItem(KEY.theme, theme.value || "");
        showToast("titleToast");
      });
      document.getElementById("clearTitleBtn").addEventListener("click", ()=>{
        title.value=""; theme.value=""; localStorage.removeItem(KEY.title); localStorage.removeItem(KEY.theme);
      });

      // Slide 5 link
      const link = document.getElementById("link");
      document.getElementById("saveLinkBtn").addEventListener("click", ()=>{
        localStorage.setItem(KEY.link, link.value || "");
        showToast("linkToast");
      });
      document.getElementById("clearLinkBtn").addEventListener("click", ()=>{
        link.value=""; localStorage.removeItem(KEY.link);
      });

      // Slide 6 story
      const story1 = document.getElementById("story1");
      const story2 = document.getElementById("story2");
      const story3 = document.getElementById("story3");
      const story4 = document.getElementById("story4");
      document.getElementById("saveStoryBtn").addEventListener("click", ()=>{
        localStorage.setItem(KEY.story1, story1.value || "");
        localStorage.setItem(KEY.story2, story2.value || "");
        localStorage.setItem(KEY.story3, story3.value || "");
        localStorage.setItem(KEY.story4, story4.value || "");
        showToast("storyToast");
      });
      document.getElementById("clearStoryBtn").addEventListener("click", ()=>{
        story1.value=""; story2.value=""; story3.value=""; story4.value="";
        localStorage.removeItem(KEY.story1); localStorage.removeItem(KEY.story2);
        localStorage.removeItem(KEY.story3); localStorage.removeItem(KEY.story4);
      });

      // Slide 7 learned
      const learned = document.getElementById("learned");
      document.getElementById("saveLearnedBtn").addEventListener("click", ()=>{
        localStorage.setItem(KEY.learned, learned.value || "");
        showToast("learnedToast");
      });
      document.getElementById("clearLearnedBtn").addEventListener("click", ()=>{
        learned.value=""; localStorage.removeItem(KEY.learned);
      });

      // Slide 8 checklist
      const cIds = ["c1","c2","c3","c4","c5","c6","c7"];
      const cEls = cIds.map(id=>document.getElementById(id));
      document.getElementById("saveCheckBtn").addEventListener("click", ()=>{
        saveJSON(KEY.checklist, cEls.map(x=>!!x.checked));
        showToast("checkToast");
      });
      document.getElementById("clearCheckBtn").addEventListener("click", ()=>{
        cEls.forEach(x=>x.checked=false);
        localStorage.removeItem(KEY.checklist);
      });

      // Slide 9 practice
      const practice = document.getElementById("practice");
      document.getElementById("savePracticeBtn").addEventListener("click", ()=>{
        localStorage.setItem(KEY.practice, practice.value || "");
        showToast("practiceToast");
      });
      document.getElementById("clearPracticeBtn").addEventListener("click", ()=>{
        practice.value=""; localStorage.removeItem(KEY.practice);
      });

      // Slide 10 listener + praise
      const lIds = ["l1","l2","l3","l4","l5"];
      const lEls = lIds.map(id=>document.getElementById(id));
      const praise = document.getElementById("praise");

      document.getElementById("saveListenBtn").addEventListener("click", ()=>{
        saveJSON(KEY.listen, lEls.map(x=>!!x.checked));
        showToast("listenToast");
      });
      document.getElementById("clearListenBtn").addEventListener("click", ()=>{
        lEls.forEach(x=>x.checked=false);
        localStorage.removeItem(KEY.listen);
      });

      document.getElementById("savePraiseBtn").addEventListener("click", ()=>{
        localStorage.setItem(KEY.praise, praise.value || "");
        showToast("praiseToast");
      });
      document.getElementById("clearPraiseBtn").addEventListener("click", ()=>{
        praise.value=""; localStorage.removeItem(KEY.praise);
      });

      // Slide 11 proud
      const proud = document.getElementById("proud");
      document.getElementById("saveProudBtn").addEventListener("click", ()=>{
        localStorage.setItem(KEY.proud, proud.value || "");
        showToast("proudToast");
      });
      document.getElementById("clearProudBtn").addEventListener("click", ()=>{
        proud.value=""; localStorage.removeItem(KEY.proud);
      });

      // Restore saved work
      (function restore(){
        const t = loadJSON(KEY.test);
        if(Array.isArray(t)) t.forEach((v,i)=>{ if(tEls[i]) tEls[i].checked = !!v; });

        finalFix.value = localStorage.getItem(KEY.finalFix) || "";
        title.value = localStorage.getItem(KEY.title) || "";
        theme.value = localStorage.getItem(KEY.theme) || "";
        link.value = localStorage.getItem(KEY.link) || "";

        story1.value = localStorage.getItem(KEY.story1) || "";
        story2.value = localStorage.getItem(KEY.story2) || "";
        story3.value = localStorage.getItem(KEY.story3) || "";
        story4.value = localStorage.getItem(KEY.story4) || "";

        learned.value = localStorage.getItem(KEY.learned) || "";

        const c = loadJSON(KEY.checklist);
        if(Array.isArray(c)) c.forEach((v,i)=>{ if(cEls[i]) cEls[i].checked = !!v; });

        practice.value = localStorage.getItem(KEY.practice) || "";

        const l = loadJSON(KEY.listen);
        if(Array.isArray(l)) l.forEach((v,i)=>{ if(lEls[i]) lEls[i].checked = !!v; });

        praise.value = localStorage.getItem(KEY.praise) || "";
        proud.value = localStorage.getItem(KEY.proud) || "";
      })();

      // ===== Access Code Gate (single + uppercase) =====
      const ACCESS_CODE = "RGMDSLP25";
      const ACCESS_KEY = "lp_access_ok_rgmdslp25_t4"; // unique for Tahap 4

      const accessGate = document.getElementById("accessGate");
      const accessInput = document.getElementById("accessCodeInput");
      const accessBtn = document.getElementById("accessCodeBtn");
      const accessNote = document.getElementById("accessNote");

      function forceUppercase(el){ el.value = (el.value || "").toUpperCase(); }
      function lockDeck(){
        accessGate.classList.add("show");
        accessGate.setAttribute("aria-hidden","false");
        document.body.style.overflow = "hidden";
      }
      function unlockDeck(){
        accessGate.classList.remove("show");
        accessGate.setAttribute("aria-hidden","true");
        document.body.style.overflow = "";
      }
      function validateCode(){
        forceUppercase(accessInput);
        const val = (accessInput.value || "").trim();
        if(val === ACCESS_CODE){
          localStorage.setItem(ACCESS_KEY,"1");
          accessNote.classList.remove("error");
          accessNote.textContent = "Kode benar ‚úÖ Materi terbuka.";
          setTimeout(unlockDeck, 200);
        }else{
          accessNote.classList.add("error");
          accessNote.textContent = "Kode salah ‚ùå Coba lagi ya.";
        }
      }
      accessInput.addEventListener("input", ()=>forceUppercase(accessInput));
      accessInput.addEventListener("keydown", (e)=>{ if(e.key === "Enter") validateCode(); });
      accessBtn.addEventListener("click", validateCode);

      if(localStorage.getItem(ACCESS_KEY) !== "1") lockDeck();

    })();
  </script>
</body>
</html>
