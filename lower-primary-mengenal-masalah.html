<!doctype html>
<html lang="id">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UOB MDS ‚Äì Lower Primary ‚Äì Sesi 25 ‚Äì Detektif Masalah (ScratchJr)</title>
  <style>
    :root {
      --bg1: #F7FAFF;
      --bg2: #F3F6FF;
      --card: #FFFFFF;
      --ink: #0F172A;
      --muted: #475569;
      --line: rgba(226, 232, 240, .95);
      --brand: #4F46E5;
      --brand2: #06B6D4;
      --ok: #16A34A;
      --bad: #DC2626;
      --radius: 22px;
      --shadow: 0 18px 40px rgba(15, 23, 42, .08);
      --shadow2: 0 10px 22px rgba(15, 23, 42, .06);
      --focus: 0 0 0 4px rgba(79, 70, 229, .18);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    * {
      box-sizing: border-box
    }

    body {
      margin: 0;
      font-family: var(--sans);
      color: var(--ink);
      background:
        radial-gradient(1200px 520px at 10% 0%, rgba(6, 182, 212, .18), transparent 60%),
        radial-gradient(1200px 520px at 90% 0%, rgba(79, 70, 229, .16), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2) 45%, var(--bg1));
      min-height: 100vh;
    }

    .app {
      width: min(1100px, 96vw);
      margin: 18px auto 26px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 12px 14px;
      border: 1px solid var(--line);
      border-radius: 18px;
      background: rgba(255, 255, 255, .72);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow2);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      width: 38px;
      height: 38px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(79, 70, 229, .18), rgba(6, 182, 212, .20));
      border: 1px solid rgba(226, 232, 240, .9);
      display: grid;
      place-items: center;
      font-weight: 1000;
      color: rgba(79, 70, 229, 1);
    }

    .brand h1 {
      margin: 0;
      font-size: 14px;
      line-height: 1.15;
      letter-spacing: .2px;
    }

    .brand .sub {
      font-size: 12px;
      color: var(--muted);
      font-weight: 800;
      margin-top: 2px;
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .btn {
      border: 1px solid rgba(226, 232, 240, .95);
      background: rgba(255, 255, 255, .9);
      padding: 10px 12px;
      border-radius: 16px;
      font-weight: 1000;
      cursor: pointer;
      box-shadow: 0 8px 16px rgba(15, 23, 42, .06);
      transition: transform .06s ease, box-shadow .12s ease, background .12s ease;
      user-select: none;
    }

    .btn:hover {
      transform: translateY(-1px)
    }

    .btn:active {
      transform: translateY(0px)
    }

    .btn.primary {
      background: linear-gradient(135deg, rgba(79, 70, 229, .12), rgba(6, 182, 212, .14));
      border-color: rgba(79, 70, 229, .18);
    }

    .btn.ghost {
      background: transparent;
      box-shadow: none
    }

    .btn:focus {
      outline: none;
      box-shadow: var(--focus);
    }

    .progressWrap {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 260px;
      justify-content: flex-end;
    }

    .progress {
      width: 180px;
      height: 10px;
      background: rgba(226, 232, 240, .9);
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid rgba(226, 232, 240, .95);
    }

    .bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(79, 70, 229, .85), rgba(6, 182, 212, .85));
      border-radius: 999px;
      transition: width .25s ease;
    }

    .count {
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      font-weight: 900;
    }

    .stage {
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(255, 255, 255, .60);
      box-shadow: var(--shadow);
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-height: calc(100vh - 145px);
    }

    .slide {
      flex: 1;
      background: rgba(255, 255, 255, .68);
      border: 1px solid rgba(229, 234, 245, .95);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 20px;
      overflow: hidden;
      /* important for internal scroll */
      backdrop-filter: blur(8px);
    }

    .slideInner {
      max-width: 980px;
      margin: 0 auto;
      max-height: calc(100vh - 190px);
      overflow-y: auto;
      padding-right: 8px;
    }

    .slideInner::-webkit-scrollbar {
      width: 10px;
    }

    .slideInner::-webkit-scrollbar-thumb {
      background: rgba(96, 112, 153, .25);
      border-radius: 999px;
      border: 3px solid rgba(255, 255, 255, .9);
    }

    .slideInner::-webkit-scrollbar-track {
      background: transparent;
    }

    h2 {
      margin: 6px 0 10px;
      font-size: 30px;
      letter-spacing: -.3px
    }

    h3 {
      margin: 0 0 8px;
      font-size: 18px
    }

    p {
      margin: 0 0 10px;
      color: var(--muted);
      font-weight: 800;
      line-height: 1.55
    }

    .kicker {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 1000;
      font-size: 12px;
      letter-spacing: .2px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(79, 70, 229, .16);
      background: rgba(79, 70, 229, .06);
      color: rgba(55, 65, 81, .95);
    }

    .grid {
      display: grid;
      gap: 14px
    }

    .cols2 {
      grid-template-columns: 1fr 1fr
    }

    @media (max-width: 860px) {
      .cols2 {
        grid-template-columns: 1fr
      }

      .progressWrap {
        min-width: unset
      }

      .progress {
        width: 130px
      }

      h2 {
        font-size: 26px
      }
    }

    .card {
      background: rgba(255, 255, 255, .92);
      border: 1px solid rgba(226, 232, 240, .95);
      border-radius: 22px;
      padding: 14px;
      box-shadow: 0 10px 18px rgba(15, 23, 42, .06);
    }

    .hint {
      background: rgba(6, 182, 212, .10);
      border: 1px dashed rgba(6, 182, 212, .35);
      border-radius: 18px;
      padding: 12px 14px;
      color: rgba(30, 41, 59, .92);
      font-weight: 900;
      line-height: 1.5;
    }

    .miniRow {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center
    }

    .tag {
      display: inline-flex;
      align-items: center;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(226, 232, 240, .95);
      background: rgba(255, 255, 255, .92);
      color: rgba(30, 41, 59, .92);
      font-weight: 1000;
      font-size: 12px;
    }

    ul.list {
      margin: 8px 0 0 18px;
      color: var(--muted);
      font-weight: 850;
      line-height: 1.55
    }

    .choices {
      display: grid;
      gap: 10px;
      margin-top: 10px
    }

    .choice {
      border: 1px solid rgba(226, 232, 240, .95);
      border-radius: 18px;
      padding: 12px 14px;
      background: rgba(255, 255, 255, .96);
      font-weight: 950;
      color: rgba(30, 41, 59, .96);
      cursor: pointer;
      user-select: none;
      transition: transform .06s ease, border-color .12s ease, background .12s ease;
    }

    .choice:hover {
      transform: translateY(-1px)
    }

    .choice.active {
      border-color: rgba(79, 70, 229, .35);
      background: rgba(79, 70, 229, .06)
    }

    .choice.ok {
      border-color: rgba(22, 163, 74, .35);
      background: rgba(22, 163, 74, .08)
    }

    .choice.bad {
      border-color: rgba(220, 38, 38, .35);
      background: rgba(220, 38, 38, .08)
    }

    .feedback {
      display: none;
      margin-top: 10px;
      border-radius: 18px;
      padding: 12px 14px;
      border: 1px solid rgba(226, 232, 240, .95);
      background: rgba(255, 255, 255, .92);
      color: var(--muted);
      font-weight: 900;
      line-height: 1.5;
    }

    .feedback.show {
      display: block
    }

    .fbOk {
      border-color: rgba(22, 163, 74, .35);
      background: rgba(22, 163, 74, .08);
      color: rgba(15, 23, 42, .92)
    }

    .fbBad {
      border-color: rgba(220, 38, 38, .35);
      background: rgba(220, 38, 38, .08);
      color: rgba(15, 23, 42, .92)
    }

    /* Toggle blocks (reused) */
    .habit {
      border: 1px solid var(--line);
      border-radius: 18px;
      padding: 12px;
      margin-top: 10px;
      background: linear-gradient(180deg, #FFFFFF, #F7FAFF);
    }

    .habitHead {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px
    }

    .miniBtn {
      padding: 8px 10px;
      border-radius: 14px;
      font-size: 12px;
      font-weight: 1000
    }

    .habitBody {
      margin-top: 10px;
      display: none;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px dashed rgba(96, 112, 153, .35);
      background: rgba(79, 70, 229, .06);
      color: var(--muted);
      font-weight: 850;
      line-height: 1.5;
    }

    .habitBody.show {
      display: block
    }

    .habitBody p {
      margin: 6px 0
    }

    /* Mini ‚Äúdigital tree‚Äù */
    .tree {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      margin-top: 10px;
    }

    .treeBox {
      border: 1px solid rgba(226, 232, 240, .95);
      border-radius: 22px;
      padding: 14px;
      background: rgba(255, 255, 255, .92);
      box-shadow: 0 10px 18px rgba(15, 23, 42, .06);
    }

    .treeTop {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 8px;
      font-weight: 1000;
    }

    .fruitRow {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px
    }

    .fruit {
      width: 38px;
      height: 38px;
      border-radius: 14px;
      border: 1px solid rgba(226, 232, 240, .95);
      background: rgba(255, 255, 255, .96);
      display: grid;
      place-items: center;
      font-size: 18px;
      cursor: pointer;
      user-select: none;
      transition: transform .06s ease, background .12s ease, border-color .12s ease;
    }

    .fruit:hover {
      transform: translateY(-1px)
    }

    .fruit.good.active {
      border-color: rgba(22, 163, 74, .35);
      background: rgba(22, 163, 74, .10)
    }

    .fruit.bad.active {
      border-color: rgba(220, 38, 38, .35);
      background: rgba(220, 38, 38, .10)
    }

    .input {
      width: 100%;
      border: 1px solid rgba(226, 232, 240, .95);
      background: rgba(255, 255, 255, .96);
      border-radius: 16px;
      padding: 12px 14px;
      font-weight: 950;
      color: rgba(30, 41, 59, .96);
    }
  </style>
</head>

<body>
  <!-- ACCESS GATE -->
  <div id="accessGate" style="
  position:fixed;
  inset:0;
  background:linear-gradient(135deg,#eef2ff,#ecfeff);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
">
    <div class="card" style="max-width:420px;width:92%;text-align:center">
      <h2>üîê Kode Akses</h2>
      <p>Masukkan kode untuk memulai sesi.</p>

      <input id="accessInput" class="input" placeholder="MASUKKAN KODE" autocomplete="off"
        style="text-align:center;font-weight:900;letter-spacing:2px" />

      <button class="btn primary" id="accessBtn" style="margin-top:12px">
        Masuk
      </button>

      <div class="feedback" id="accessFb" style="margin-top:10px"></div>

      <div class="hint" style="margin-top:10px">
        Kode diberikan oleh guru.
      </div>
    </div>
  </div>

  <div class="app">
    <div class="topbar">
      <div class="brand">
        <div class="logo">LP</div>
        <div>
          <h1>Lower Primary</h1>
          <div class="sub">Mengenal Masalah dan Komunikasi dengan Baik</div>
        </div>
      </div>

      <div class="controls">
        <button class="btn ghost" id="btnHome" title="Kembali ke awal">üè† Awal</button>
        <button class="btn" id="btnPrev" title="Sebelumnya (‚Üê)">‚Üê</button>
        <button class="btn primary" id="btnNext" title="Berikutnya (‚Üí)">‚Üí</button>
      </div>

      <div class="progressWrap">
        <div class="progress" aria-label="Progress">
          <div class="bar" id="bar"></div>
        </div>
        <div class="count" id="count">1/1</div>
      </div>
    </div>

    <div class="stage">
      <div class="slide" role="region" aria-label="Slide">
        <div class="slideInner" id="content"></div>
      </div>

    </div>
  </div>

  <script>

    const slides = [
      {
        title: "Pembuka", html: `
        <h2>üïµÔ∏è Detektif Masalah!</h2>
        <p>Hari ini kita belajar: <b>lihat masalah</b>, cari <b>solusi</b>, lalu buat <b>kode</b> di ScratchJr.</p>
        <div class="grid cols2" style="margin-top:10px">
          <div class="card">
            <h3>Target kita</h3>
            <ul class="list">
              <li>Kenal masalah kecil</li>
              <li>Pilih solusi aman</li>
              <li>Susun langkah urut</li>
              <li>Coba &amp; perbaiki</li>
            </ul>
            <div class="hint" style="margin-top:10px">Kalau bingung, tanya kakak guru ya.</div>
          </div>
          <div class="card">
            <h3>Siap mulai?</h3>
            <p>Klik tombol ini.</p>
            <button class="btn primary" data-goto="1">üöÄ Mulai</button>
          </div>
        </div>
      `},

      {
        title: "Ice breaking", html: `
        <h2>Pernah begini?</h2>
        <p>Pilih yang pernah kamu alami.</p>
        <div class="card" style="margin-top:10px">
          <div class="choices" data-select-group="ice" data-limit="2">
            <div class="choice">Mainan berantakan</div>
            <div class="choice">Pensil patah</div>
            <div class="choice">Pintu susah dibuka</div>
            <div class="choice">Tas ketinggalan</div>
          </div>
          <div class="hint" style="margin-top:10px">Pilih maksimal 2 ya.</div>
        </div>
        <div class="card" style="margin-top:12px">
          <h3 style="margin:0 0 8px">Mini quiz</h3>
          <p style="margin:0 0 10px">Kalau ada yang mengganggu rencana, itu disebut‚Ä¶</p>
          <div class="choices" data-quiz="qMasalah">
            <div class="choice" data-answer="right">Masalah</div>
            <div class="choice" data-answer="wrong">Hadiah</div>
          </div>
          <div class="feedback" data-quiz-feedback="qMasalah"></div>
        </div>
      `},

      {
        title: "Apa itu masalah", html: `
        <h2>ü§î Apa itu masalah?</h2>
        <p>Masalah itu saat sesuatu <b>tidak berjalan</b> seperti yang kita mau.</p>
        <div class="grid cols2" style="margin-top:10px">
          <div class="card">
            <h3>Contoh cepat</h3>
            <ul class="list">
              <li>Mau menulis, pensil patah</li>
              <li>Mau main, mainan berantakan</li>
              <li>Mau ambil barang, terlalu tinggi</li>
            </ul>
          </div>
          <div class="card">
            <h3>Kita ngapain?</h3>
            <p>Kita cari cara supaya jadi <b>lancar lagi</b>.</p>
            <button class="btn primary" data-toggle="why1">Klik: kenapa penting?</button>
            <div class="habitBody" id="why1">
              <ul class="list" style="margin:8px 0 0">
                <li>Lebih nyaman</li>
                <li>Kelas lebih rapi</li>
                <li>Kita jadi bangga</li>
              </ul>
            </div>
          </div>
        </div>
      `},

      {
        title: "Detektif 1 menit", html: `
        <h2>üïµÔ∏è Detektif Masalah (1 menit)</h2>
        <p>Lihat sekelilingmu. Temukan 1 masalah kecil.</p>
        <div class="card" style="margin-top:10px">
          <div class="miniRow" style="justify-content:space-between">
            <span class="tag">Timer</span>
            <span class="tag" id="t1">01:00</span>
          </div>
          <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn primary" data-timer-start="t1" data-seconds="60">‚è±Ô∏è Mulai</button>
            <button class="btn" data-timer-reset="t1" data-seconds="60">üîÅ Ulang</button>
          </div>
          <div class="hint" style="margin-top:10px">Saat selesai, angkat tangan.</div>
        </div>
      `},

      {
        title: "Bagi cerita", html: `
        <h2>üó£Ô∏è Cerita singkat</h2>
        <p>Sebutkan: masalahnya apa? (1 kalimat)</p>
        <div class="grid cols2" style="margin-top:10px">
          <div class="card">
            <h3>Template ngomong</h3>
            <ul class="list">
              <li>‚ÄúMasalahnya: ____.‚Äù</li>
              <li>‚ÄúKarena: ____.‚Äù</li>
            </ul>
          </div>
          <div class="card">
            <h3>Giliran siapa?</h3>
            <p>2‚Äì3 teman saja ya.</p>
            <div class="hint">Teman lain: dengarkan.</div>
          </div>
        </div>
      `},

      {
        title: "Cari solusi", html: `
        <h2>üí° Cari solusi</h2>
        <p>Pilih solusi yang <b>aman</b> dan <b>mudah</b>.</p>
        <div class="grid cols2" style="margin-top:10px">
          <div class="card">
            <h3>Contoh: barang di rak tinggi</h3>
            <ul class="list">
              <li>Minta bantuan orang dewasa</li>
              <li>Ambil kursi kecil (hati-hati)</li>
              <li>Pakai benda yang lebih dekat</li>
            </ul>
          </div>
          <div class="card">
            <h3>Mini quiz</h3>
            <p>Kalau barang terlalu tinggi, yang paling aman‚Ä¶</p>
            <div class="choices" data-quiz="qAman">
              <div class="choice" data-answer="right">Minta bantuan orang dewasa</div>
              <div class="choice" data-answer="wrong">Lompat-lompat sendiri</div>
            </div>
            <div class="feedback" data-quiz-feedback="qAman"></div>
          </div>
        </div>
      `},

      {
        title: "Bicara baik", html: `
        <h2>üó£Ô∏è Bicara dengan baik</h2>
        <p>Solusi bagus harus disampaikan dengan kata yang baik.</p>
        <div class="grid cols2" style="margin-top:10px">
          <div class="card">
            <h3>Kurang enak üòï</h3>
            <p><b>‚ÄúKamu bikin berantakan!‚Äù</b></p>
          </div>
          <div class="card">
            <h3>Lebih enak üòä</h3>
            <p><b>‚ÄúAyo rapikan bareng, biar kelas nyaman.‚Äù</b></p>
          </div>
        </div>
        <div class="card" style="margin-top:12px">
          <h3 style="margin:0 0 8px">Pilih kalimat yang baik</h3>
          <div class="choices" data-quiz="qSopan">
            <div class="choice" data-answer="wrong">‚ÄúCepat! Kamu salah!‚Äù</div>
            <div class="choice" data-answer="right">‚ÄúPelan-pelan ya, kita coba lagi.‚Äù</div>
          </div>
          <div class="feedback" data-quiz-feedback="qSopan"></div>
        </div>
      `},

      {
        title: "Cerita ScratchJr", html: `
        <h2>üê• Masuk ke ScratchJr</h2>
        <p>Anak ayam tersesat. Ia mau ketemu ibu ayam.</p>
        <div class="grid cols2" style="margin-top:10px">
          <div class="card">
            <h3>Yang kita siapkan</h3>
            <ul class="list">
              <li>Sprite anak ayam</li>
              <li>Sprite ibu ayam</li>
              <li>Background rumput</li>
              <li>Batu / rumput (opsional)</li>
            </ul>
          </div>
          <div class="card">
            <h3>Target</h3>
            <p>Ayam kecil sampai di dekat ibunya.</p>
            <button class="btn primary" data-goto="8">‚û°Ô∏è Lanjut</button>
          </div>
        </div>
      `},

      {
        title: "Pahami posisi", html: `
        <h2>üîé Pahami dulu</h2>
        <p>Jawab cepat.</p>
        <div class="card" style="margin-top:10px">
          <h3 style="margin:0 0 8px">Anak ayam harus‚Ä¶</h3>
          <div class="choices" data-quiz="qTujuan">
            <div class="choice" data-answer="right">Pergi ke ibu ayam</div>
            <div class="choice" data-answer="wrong">Diam saja</div>
          </div>
          <div class="feedback" data-quiz-feedback="qTujuan"></div>
        </div>
        <div class="hint" style="margin-top:10px">Lihat: anak ayam di mana? ibu ayam di mana?</div>
      `},

      {
        title: "Susun langkah", html: `
        <h2>üìã Susun langkah</h2>
        <div class="grid cols2" style="margin-top:10px">
          <div class="card">
            <h3>Langkah pilihan</h3>
            <div class="choices" data-order-pool="og1">
              <div class="choice" data-step="Jalan ke kanan">Jalan ke kanan</div>
              <div class="choice" data-step="Lompat">Lompat</div>
              <div class="choice" data-step="Jalan lagi">Jalan lagi</div>
              <div class="choice" data-step="Berhenti dekat ibu">Berhenti dekat ibu</div>
            </div>
          </div>
          
        </div>
      `},

      {
        title: "Langkah jadi kode", html: `
        <h2>üîß Dari langkah jadi kode</h2>
        <p>Setiap langkah punya blok.</p>
        <div class="grid cols2" style="margin-top:10px">
          <div class="card">
            <h3>Panduan cepat</h3>
            <ul class="list">
              <li>Jalan ‚Üí blok panah</li>
              <li>Lompat ‚Üí blok hop</li>
              <li>Mulai ‚Üí bendera hijau</li>
            </ul>
            <button class="btn ghost" data-toggle="codeHint">Lihat tips</button>
            <div class="habitBody" id="codeHint">
              <p>Mulai dari sedikit blok dulu. Kalau sudah jalan, baru tambah.</p>
            </div>
          </div>
          <div class="card">
            <h3>Mini quiz</h3>
            <p>Program dimulai dengan‚Ä¶</p>
            <div class="choices" data-quiz="qMulai">
              <div class="choice" data-answer="right">Bendera hijau</div>
              <div class="choice" data-answer="wrong">Tombol silang</div>
            </div>
            <div class="feedback" data-quiz-feedback="qMulai"></div>
          </div>
        </div>
      `},

      {
        title: "Coba & perbaiki", html: `
        <h2>‚ñ∂Ô∏è Coba dan perbaiki</h2>
        <p>Kalau belum sampai, kita ubah sedikit.</p>
        <div class="grid cols2" style="margin-top:10px">
          <div class="card">
            <h3>Checklist</h3>
            <ul class="list">
              <li>Sudah tekan bendera hijau?</li>
              <li>Arah gerak sudah benar?</li>
              <li>Perlu tambah 1 langkah?</li>
            </ul>
          </div>
          <div class="card">
            <h3>Mini quiz</h3>
            <p>Kalau salah, kita‚Ä¶</p>
            <div class="choices" data-quiz="qDebug">
              <div class="choice" data-answer="right">Coba lagi dan perbaiki</div>
              <div class="choice" data-answer="wrong">Menyerah</div>
            </div>
            <div class="feedback" data-quiz-feedback="qDebug"></div>
          </div>
        </div>
      `},

      {
        title: "Refleksi", html: `
        <h2>üåü Aku bisa!</h2>
        <p>Centang yang kamu lakukan hari ini.</p>
        <div class="card" style="margin-top:10px">
          <div class="choices" data-select-group="ref" data-limit="4">
            <div class="choice">Aku menemukan masalah</div>
            <div class="choice">Aku memilih solusi</div>
            <div class="choice">Aku menyusun langkah urut</div>
            <div class="choice">Aku coba dan perbaiki</div>
          </div>
          <div class="hint" style="margin-top:10px">Kamu boleh centang semuanya kalau sudah.</div>
        </div>
        <div class="card" style="margin-top:12px">
          <h3 style=\"margin:0 0 8px\">Penutup</h3>
          <p style=\"margin:0\">Kamu sudah berpikir seperti programmer!</p>
          <button class=\"btn primary\" data-goto=\"13\" style=\"margin-top:10px\">‚û°Ô∏è Selesai</button>
        </div>
      `},

      {
        title: "Selesai", html: `
        <h2>üéâ Selesai!</h2>
        <p>Terima kasih. Sampai ketemu di sesi berikutnya.</p>
        <div class="card" style="margin-top:10px">
          <button class="btn" data-goto="0">üè† Kembali ke awal</button>
        </div>
      `}
    ];


    let idx = 0;
    const content = document.getElementById("content");
    const bar = document.getElementById("bar");
    const count = document.getElementById("count");
    const btnPrev = document.getElementById("btnPrev");
    const btnNext = document.getElementById("btnNext");
    const btnHome = document.getElementById("btnHome");

    function clamp(n, a, b) { return Math.max(a, Math.min(b, n)); }

    /* ===============================
   ACCESS CODE GATE
================================ */
    const ACCESS_CODE = "RGMDSLP25";

    const gate = document.getElementById("accessGate");
    const input = document.getElementById("accessInput");
    const btn = document.getElementById("accessBtn");
    const fb = document.getElementById("accessFb");

    // auto uppercase
    input.addEventListener("input", () => {
      input.value = input.value.toUpperCase();
    });

    // submit handler
    btn.addEventListener("click", checkAccess);
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") checkAccess();
    });

    function checkAccess() {
      if (input.value.trim() === ACCESS_CODE) {
        gate.style.display = "none";
      } else {
        fb.className = "feedback show fbBad";
        fb.textContent = "Kode salah. Coba lagi.";
      }
    }

    function render() {
      const s = slides[idx];
      content.innerHTML = s.html;
      // update progress
      const pct = ((idx + 1) / slides.length) * 100;
      bar.style.width = pct + "%";
      count.textContent = `${idx + 1}/${slides.length}`;
      // wire interactivity
      wireInteractions();
      // handle goto buttons
      content.querySelectorAll("[data-goto]").forEach(b => {
        b.addEventListener("click", () => {
          const to = Number(b.getAttribute("data-goto"));
          idx = clamp(to, 0, slides.length - 1);
          render();
          content.scrollTop = 0;
        });
      });
    }

    function showFeedback(el, html, type) {
      if (!el) return;
      el.classList.add("show");
      el.style.display = "block";
      el.classList.remove("fbOk", "fbBad");
      if (type === "ok") el.classList.add("fbOk");
      if (type === "bad") el.classList.add("fbBad");
      el.innerHTML = html;
    }

    function wireQuiz(group) {
      const id = group.getAttribute("data-quiz");
      const fb = content.querySelector(`[data-quiz-feedback="${id}"]`);
      const items = [...group.querySelectorAll(".choice")];

      items.forEach(ch => {
        ch.addEventListener("click", () => {
          items.forEach(x => x.classList.remove("active", "ok", "bad"));
          ch.classList.add("active");

          const isRight = ch.getAttribute("data-answer") === "right";
          if (isRight) {
            ch.classList.add("ok");
            const msg = getQuizMsg(id, true);
            showFeedback(fb, msg, "ok");
          } else {
            ch.classList.add("bad");
            const msg = getQuizMsg(id, false);
            showFeedback(fb, msg, "bad");
          }
        });
      });
    }

    function wireSelectGroup() {
      content.querySelectorAll("[data-select-group]").forEach(group => {
        const limit = Number(group.getAttribute("data-limit")) || 999;
        const choices = [...group.querySelectorAll(".choice")];

        choices.forEach(ch => {
          ch.addEventListener("click", () => {
            const isActive = ch.classList.contains("active");

            if (isActive) {
              ch.classList.remove("active");
              return;
            }

            const activeCount = choices.filter(c => c.classList.contains("active")).length;
            if (activeCount >= limit) return;

            ch.classList.add("active");
          });
        });
      });
    }


    function getQuizMsg(id, ok) {

      const msgs = {
        qMasalah: { ok: "‚úÖ Betul! Itu namanya masalah.", bad: "‚ö†Ô∏è Coba lagi. Yang mengganggu rencana itu masalah." },
        qAman: { ok: "‚úÖ Benar. Minta bantuan itu paling aman.", bad: "‚ö†Ô∏è Lebih aman minta bantuan orang dewasa." },
        qSopan: { ok: "‚úÖ Mantap. Kata-katanya enak didengar.", bad: "‚ö†Ô∏è Pilih kalimat yang sopan ya." },
        qTujuan: { ok: "‚úÖ Iya! Kita bantu anak ayam ke ibunya.", bad: "‚ö†Ô∏è Tujuannya ketemu ibu ayam." },
        qMulai: { ok: "‚úÖ Benar. Mulai dari bendera hijau.", bad: "‚ö†Ô∏è Coba ingat. Mulai itu bendera hijau." },
        qDebug: { ok: "‚úÖ Betul. Coba dan perbaiki.", bad: "‚ö†Ô∏è Jangan menyerah. Coba lagi ya." }
      };

      const m = msgs[id];
      if (!m) return ok ? "‚úÖ Benar!" : "‚ö†Ô∏è Coba lagi.";
      return ok ? m.ok : m.bad;
    }

    function wireToggles() {
      content.querySelectorAll("[data-toggle]").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-toggle");
          const panel = content.querySelector("#" + id);
          if (!panel) return;

          const isOpen = panel.classList.contains("show");
          panel.classList.toggle("show", !isOpen);

          // text change if button not ghost
          if (btn.classList.contains("miniBtn") || btn.classList.contains("btn")) {
            btn.textContent = isOpen ? (btn.textContent.includes("Tutup") ? btn.textContent.replace("Tutup", "Lihat") : "Lihat") : "Tutup";
          }
          if (!isOpen) panel.scrollIntoView({ behavior: "smooth", block: "nearest" });
        });
      });
    }

    function wireTreeGameV2() {
      const goodGroup = content.querySelector('[data-select-group="good"]');
      const badGroup = content.querySelector('[data-select-group="bad"]');
      const checkBtn = content.querySelector('[data-check-tree]');
      const resetBtn = content.querySelector('[data-reset-tree]');
      const tag = content.querySelector('#treeTag');
      const fb = content.querySelector('#treeFb');

      if (!goodGroup || !badGroup || !checkBtn || !resetBtn) return;

      function countActive(group) {
        return group.querySelectorAll('.choice.active').length;
      }

      checkBtn.addEventListener('click', () => {
        const g = countActive(goodGroup);
        const b = countActive(badGroup);

        tag.style.display = 'inline-flex';
        fb.classList.add('show');

        if (g === 3 && b === 3) {
          tag.textContent = '‚úÖ Mantap!';
          fb.className = 'feedback show fbOk';
          fb.innerHTML =
            'Keren! Kamu sudah bisa membedakan contoh jejak digital yang baik dan tidak baik.';
        } else {
          tag.textContent = '‚ö†Ô∏è Belum lengkap';
          fb.className = 'feedback show fbBad';
          fb.innerHTML =
            `Pilih <b>3</b> jejak baik dan <b>3</b> jejak tidak baik.<br>
        Sekarang: baik ${g}/3, tidak baik ${b}/3.`;
        }
      });

      resetBtn.addEventListener('click', () => {
        goodGroup.querySelectorAll('.choice').forEach(c => c.classList.remove('active'));
        badGroup.querySelectorAll('.choice').forEach(c => c.classList.remove('active'));
        tag.style.display = 'none';
        tag.textContent = '';
        fb.className = 'feedback';
        fb.innerHTML = '';
      });
    }


    function wireInteractions() {
      content.querySelectorAll("[data-quiz]").forEach(wireQuiz);
      wireSelectGroup();
      wireToggles();
      wireTreeGameV2();
    }

    function go(d) {
      idx = clamp(idx + d, 0, slides.length - 1);
      render();
      content.scrollTop = 0;
    }

    btnPrev.addEventListener("click", () => go(-1));
    btnNext.addEventListener("click", () => go(1));
    btnHome.addEventListener("click", () => { idx = 0; render(); content.scrollTop = 0; });

    window.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") go(-1);
      if (e.key === "ArrowRight") go(1);
      if (e.key === "Home") { idx = 0; render(); content.scrollTop = 0; }
    });

    // init
    render();
  </script>
</body>

</html>